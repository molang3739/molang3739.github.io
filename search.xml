<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>enable CORS support in Chrome on Mac</title>
      <link href="/2025/05/02/enable-CORS-support-in-Chrome-on-Mac/"/>
      <url>/2025/05/02/enable-CORS-support-in-Chrome-on-Mac/</url>
      
        <content type="html"><![CDATA[<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>CORS (Cross-Origin Resource Sharing) is a security feature implemented in modern web browsers. It restricts web pages from making requests to a domain different from the one that served the original page. This mechanism protects users from malicious scripts attempting to access sensitive information across sites.</p><p>However, during local development or API testing, CORS can sometimes block legitimate requests. In such cases, it may be helpful to temporarily disable CORS restrictions for development purposes.</p><p>⚠️ Warning: Disabling web security significantly reduces browser protections. Use this method strictly for development. Do not browse the internet with this instance.</p><h2 id="Solution-Launch-Chrome-with-CORS-Disabled-on-macOS"><a href="#Solution-Launch-Chrome-with-CORS-Disabled-on-macOS" class="headerlink" title="Solution: Launch Chrome with CORS Disabled on macOS"></a>Solution: Launch Chrome with CORS Disabled on macOS</h2><p>To start a new Chrome instance with web security disabled, run the following command in your terminal:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">open -n /Applications/Google\ Chrome.app/ --args --disable-web-security --user-data-dir=<span class="variable">$HOME</span>/MyChromeDevUserData/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Explanation:<br>open -n: Opens a new Chrome instance, even if another one is running.</p><p>–disable-web-security: Disables CORS and other security features.</p><p>–user-data-dir: Specifies a separate user profile directory to isolate this instance from your main Chrome profile.</p>]]></content>
      
      
      
        <tags>
            
            <tag> CORS, Chrome, macOS, Web Development </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm install config</title>
      <link href="/2025/02/20/npm-install-config/"/>
      <url>/2025/02/20/npm-install-config/</url>
      
        <content type="html"><![CDATA[<p>After installing npm, I wanted to install http-server, but I got an error saying:</p><!-- ![](/Users/huck/Library/Application%20Support/marktext/images/2025-02-20-21-38-25-image.png) --><p><img src="/./images/npm-ic/image.png" alt="error-img"><br>the reason is that node_module directroy is in a protected directory.</p><p><a href="https://support.apple.com/zh-cn/guide/security/secb7ea06b49/web">Apple Support: System Integrity Protection</a></p><p>There are three ways to solve this problem:</p><ol><li>Use <code>sudo</code> to install (not recommended)</li><li>Turn off SIP (not recommended)</li><li>Manually change npm’s default directories (suggested)</li></ol><p>Using <code>sudo</code> to install will override system files. If a package contains malicious code, using <code>sudo</code> grants the code full system control, leading to severe security vulnerabilities.</p><p>SIP (System Integrity Protection) was introduced in macOS 10.13, which protects the following directories from modification:</p><ul><li>&#x2F;System</li><li>&#x2F;usr</li><li>&#x2F;bin</li><li>&#x2F;sbin</li><li>&#x2F;var</li></ul><p>There’s a solution to turn off SIP (<a href="https://developer.apple.com/documentation/security/disabling-and-enabling-system-integrity-protection">Disabling and Enabling System Integrity Protection | Apple Developer Documentation</a>), but this is not recommended.</p><p>The best approach is to set a custom default directory for npm:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/npm-global</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> prefix ~/npm-global</span><br></pre></td></tr></table></figure><p>add the following scripts in your bash_profile or ~&#x2F;.zshrc if you use zsh:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> N_PREFIX=<span class="string">&quot;<span class="variable">$HOME</span>/npm-global&quot;</span> <span class="comment">#depends on your directory</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$N_PREFIX</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>to make it work,execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile <span class="comment">#bash user</span></span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc  <span class="comment">#zsh user</span></span><br></pre></td></tr></table></figure><p>That’s it.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tapbit 合约页面性能报告</title>
      <link href="/2025/01/06/Tapbit%E5%90%88%E7%BA%A6%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A/"/>
      <url>/2025/01/06/Tapbit%E5%90%88%E7%BA%A6%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="报告概述"><a href="#报告概述" class="headerlink" title="报告概述"></a>报告概述</h1><h2 id="1-背景"><a href="#1-背景" class="headerlink" title="1 背景"></a>1 背景</h2><p>检查 Tapbit 合约页面的性能，寻找是否有可优化的地方<br>浏览器：Mac 上的 Chrome，版本 131.0.6778.205 (Official Build) (arm64)<br>设备：MacBook Air M3</p><h3 id="2-当前性能指标"><a href="#2-当前性能指标" class="headerlink" title="2 当前性能指标"></a>2 当前性能指标</h3><p>使用工具（WebPageTest 和隐身模式下的 LightHouse）获取 Binance、OKX 和 Tapbit 的性能指标  </p><table><thead><tr><th></th><th>Binance</th><th>OKX</th><th>Tapbit</th></tr></thead><tbody><tr><td>性能评分</td><td>91</td><td>92</td><td>67</td></tr><tr><td>SSR</td><td>是</td><td>是</td><td>否</td></tr></tbody></table><p><img src="/./images/script/performance_ssr.png" alt="performance_ssr"></p><p>页面地址：<a href="https://www.tapbit.com/contract/futures/BTC-SWAP">https://www.tapbit.com/contract/futures/BTC-SWAP</a><br>在线结果：<a href="https://www.webpagetest.org/result/250103_AiDcE7_FE/">https://www.webpagetest.org/result/250103_AiDcE7_FE&#x2F;</a>  </p><p><img src="/./images/script/okx_performance.png" alt="okx_performance">  </p><p><img src="/./images/script/binance_performance.png" alt="binance_performance">  </p><p><img src="/./images/script/tapbit_performance.png" alt="tapbit_performance">  </p><p>为什么 SSR（服务器端渲染）的性能评分比 CSR（客户端渲染）更高？答案将在博客结尾解释。</p><p>在接下来的部分中，我们将使用本地 LightHouse 数据分析 Tapbit。</p><h4 id="首次内容绘制-FCP-：（页面上第一个文本或图像被绘制）"><a href="#首次内容绘制-FCP-：（页面上第一个文本或图像被绘制）" class="headerlink" title="首次内容绘制 (FCP) ：（页面上第一个文本或图像被绘制）"></a>首次内容绘制 (FCP) ：（页面上第一个文本或图像被绘制）</h4><p>2.3 秒  </p><p>推荐值为 1.8 秒，详见：<a href="https://web.dev/articles/fcp#what-is-a-good-fcp-score">https://web.dev/articles/fcp#what-is-a-good-fcp-score</a></p><h4 id="最大内容绘制-LCP-：（页面上最大的文本或图像被绘制）"><a href="#最大内容绘制-LCP-：（页面上最大的文本或图像被绘制）" class="headerlink" title="最大内容绘制 (LCP)：（页面上最大的文本或图像被绘制）"></a>最大内容绘制 (LCP)：（页面上最大的文本或图像被绘制）</h4><p>2.9 秒  </p><p>推荐值为 2.5 秒，详见：<a href="https://web.dev/articles/fcp#what-is-a-good-fcp-score">https://web.dev/articles/fcp#what-is-a-good-fcp-score</a></p><h4 id="速度指数-SI-：（页面内容可见填充的速度）："><a href="#速度指数-SI-：（页面内容可见填充的速度）：" class="headerlink" title="速度指数 (SI)：（页面内容可见填充的速度）："></a>速度指数 (SI)：（页面内容可见填充的速度）：</h4><p>3.9 秒  </p><p><img src="/./images/script/current-performance.png" alt="current-performance"></p><h4 id="总体性能评分："><a href="#总体性能评分：" class="headerlink" title="总体性能评分："></a>总体性能评分：</h4><p>67  </p><p><img src="/./images/script/overall.png" alt="overall"></p><h2 id="3-优化建议"><a href="#3-优化建议" class="headerlink" title="3 优化建议"></a>3 优化建议</h2><p>从数据中可以看出，LCP 和 FCP 不符合推荐值。  </p><p>针对 FCP 和 LCP，我们可以采取以下措施：</p><h3 id="消除阻塞渲染的资源"><a href="#消除阻塞渲染的资源" class="headerlink" title="消除阻塞渲染的资源"></a>消除阻塞渲染的资源</h3><p><img src="/./images/script/blocking-requests.png" alt="blocking-request">  </p><p><img src="/./images/script/script-no-deffer.png" alt="script-no-deffer"><br>未设置 <code>defer</code> 属性的脚本会阻塞后续脚本的执行。</p><p>通过网络面板可以看到：<br><img src="/./images/script/script-network.png" alt="script-network"><br>四个脚本的总加载时间为 568+731+699+731，合计 2729 毫秒。理想情况下，单个脚本的加载时间应不超过 699 毫秒。  </p><p>脚本 <a href="https://cdn.tapbit.mobi/libs/googleTag/index.js">https://cdn.tapbit.mobi/libs/googleTag/index.js</a> 的大小为 1KiB，但阻塞时间为 380 毫秒。<br>我们可以将此脚本内联到 HTML 中以减少请求并优化加载时间。</p><p><img src="/./images/script/script-unused.png" alt="script-unused"><br><code>vendor.js</code> 文件大小超过 1MB，推荐的大小应不超过 300KB <a href="/2025/01/02/How-large-should-a-JS-file-be/" target="_blank">（为什么是 300KB？）</a>。<br>可通过代码分割（（<a href="https://webpack.js.org/guides/code-splitting/"><code>code-splitting</code></a>））或移除未使用的路由来减小文件大小。文件拆分后可以充分利用http2 的多路复用机制，减少js 加载时间。</p><h3 id="提前连接所需的资源"><a href="#提前连接所需的资源" class="headerlink" title="提前连接所需的资源"></a>提前连接所需的资源</h3><p><img src="/./images/script/script-orions.png" alt="script-orions"><br>将 <a href="https://cdn.aisecurius.com/">https://cdn.aisecurius.com</a> 配置为 <code>dns-prefetch</code><br>将 <a href="https://a-pc.tapbit.com/">https://a-pc.tapbit.com</a> 配置为 <code>preconnect</code>  </p><h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//cdn.aisecurius.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preconnect&quot; href=&quot;https://a-pc.tapbit.com&quot;&gt;</span><br></pre></td></tr></table></figure><p>另外<br><img src="/./images/script/script-dns-prefetch.png" alt="dns-prefetch"><br>可以移除未使用的 dns-prefetch，因为它会消耗额外带宽。</p><h4 id="减少未使用的-CSS"><a href="#减少未使用的-CSS" class="headerlink" title="减少未使用的 CSS"></a>减少未使用的 CSS</h4><p><img src="/./images/script/script-unused-css.png" alt="unused-css"><br>减少未使用的 CSS，限制 CSS 文件大小。Chrome 的 Coverage 工具可以帮助定位。</p><h3 id="4-总结与后续步骤"><a href="#4-总结与后续步骤" class="headerlink" title="4 总结与后续步骤"></a>4 总结与后续步骤</h3><h4 id="4-1-性能监控"><a href="#4-1-性能监控" class="headerlink" title="4.1 性能监控"></a>4.1 性能监控</h4><p>   <img src="/./images/script/script-performance.png" alt="performance"></p><p>CPU 使用率在 50% 左右，没有明显的性能问题。</p><p>存在一个 bug：切换到后台时，Chrome 的 CPU 使用率会飙升到 100%，切换回前台后又会下降。这可能是 Chrome 的问题，或某些脚本在后台触发的原因，需要进一步调查。</p><p><img src="/./images/script/cpu100.png" alt="cpu100"></p><h4 id="4-2-浏览器崩溃"><a href="#4-2-浏览器崩溃" class="headerlink" title="4.2 浏览器崩溃"></a>4.2 浏览器崩溃</h4><p>在分析网页时，我遇到了几次浏览器崩溃，错误代码为 5 或 10。<br><img src="/./images/script/errorcode10.png" alt="alt text"><br>崩溃的原因可能包括扩展冲突、硬件加速问题、用户数据损坏、软件冲突或资源不足。由于其他标签页没有崩溃，我猜测原因可能是内存不足。</p><p>打开浏览器等待一小时</p><p>对比内存使用情况和 DOM 节点数量：</p><table><thead><tr><th></th><th>binance</th><th>okx</th><th>tapbit</th></tr></thead><tbody><tr><td>JS heap size</td><td>372</td><td>144</td><td>284</td></tr><tr><td>dom nodes</td><td>6462</td><td>7000</td><td>280982</td></tr><tr><td>JS event listners</td><td>4401</td><td>4366</td><td>60906</td></tr></tbody></table><!-- ![js_heap](./images/script/js_heap.png)![dom_nodes](./images/script/dom_nodes.png) --><p><img src="/./images/script/performance_metric.png" alt="performance_metric"></p><p>Tapbit 的 DOM 节点数是 Binance 的 43 倍，随着时间的增长，节点逐渐变多，是否是因为 无效渲染 或 重复节点，需要定位下原因。堆内存曲线显示 JS 堆大小逐渐增加到 700MB，这可能是崩溃的原因。可以使用 chrome Heap Profiler  查找原因，通过减少不必要的 DOM 或使用虚拟 DOM 优化。</p><!-- ![binance-usage](./images/script/binance-usage.png)![okx-usage](./images/script/okx-usage.png)![tapbit-usage](./images/script/tapbit-usage.png) --><p><img src="/./images/script/binance-usage-listeners.png" alt="binance-usage-listeners"></p><p><img src="/./images/script/okx-usage-listeners.png" alt="okx-usage-listeners"></p><p><img src="/./images/script/tapbit-usage-listeners2.png" alt="tapbit-usage-listeners2"></p><p><img src="/./images/script/tapbit-usage.png" alt="tapbit-usage"></p><h4 id="4-2-图像优化"><a href="#4-2-图像优化" class="headerlink" title="4.2 图像优化"></a>4.2 图像优化</h4><p><img src="/./images/script/script-logo.png" alt="logo"><br>Logo 的渲染大小为 85x24 像素，但图片实际大小为 227x64 像素。即使对于 2x 图像，这也太大了。</p><p>页面上的其他图片可以使用原生方案延迟加载图像（async），后续更新。</p><h4 id="4-3-SSR-CSR"><a href="#4-3-SSR-CSR" class="headerlink" title="4.3 SSR &amp; CSR"></a>4.3 SSR &amp; CSR</h4><p>为什么 SSR 比 CSR 的性能评分更高？</p><p>在 SSR 中，服务器向浏览器发送完全渲染的 HTML 页面，这意味着浏览器可以立即显示内容，为用户提供更快的加载体验。而在 CSR 中，浏览器需要先下载并执行 JavaScript，然后才能渲染内容，导致延迟。</p><p>此外，SSR 更有利于 SEO，因为 HTML 和 meta 标签可以被搜索引擎轻松读取。但 SSR 会增加服务器的成本。</p><p>对于 CSR，可以启用预渲染（Pre-rendering）来生成已渲染的 HTML。</p><h4 id="Comparison-of-web-module-versions"><a href="#Comparison-of-web-module-versions" class="headerlink" title="Comparison of web module versions"></a>Comparison of web module versions</h4><table><thead><tr><th></th><th>binance</th><th>okx</th><th>tapbit</th></tr></thead><tbody><tr><td>tradingview</td><td>TT v27.000 (@ 2024-01-17T15:06:14.900Z)</td><td>TT v28.4.0 ( @ 2024-11-29T13:18:46.094Z)</td><td>CL v22.032 (@ 2022-07-06T11:53:07.702Z)</td></tr><tr><td>react</td><td>18.2.0</td><td>18.3.1</td><td>16.14.0</td></tr><tr><td>sentry</td><td>7.38.0</td><td>7.74.1</td><td>8.31.0</td></tr></tbody></table><p>从经验数据来看，更新的版本会带来更好的性能，但升级过程中的兼容性会带来不小的工作量，需要全面的测试保证质量，也是不小的成本，需要权衡后才进行</p><h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><a href="https://web.dev/articles/rail">https://web.dev/articles/rail</a> </p><h4 id="seo分析报告"><a href="#seo分析报告" class="headerlink" title="seo分析报告"></a>seo分析报告</h4><p>seo 只有TDK 吗,seo 有哪些作用，前端和seo 有什么关系，怎么评价一个网站seo做的好不好，下一篇敬请期待</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Performance Report for Tapbit BTC Contract Page</title>
      <link href="/2025/01/03/Performance-Report-for-Tapbit-BTC-Contract-Page/"/>
      <url>/2025/01/03/Performance-Report-for-Tapbit-BTC-Contract-Page/</url>
      
        <content type="html"><![CDATA[<h1 id="Report-Overview"><a href="#Report-Overview" class="headerlink" title="Report Overview"></a>Report Overview</h1><h2 id="1-background"><a href="#1-background" class="headerlink" title="1 background"></a>1 background</h2><p>check the performance of tapbit futures pages ,to see if there is anything can be optmized<br>browser : chrome  on mac  Version 131.0.6778.205 (Official Build) (arm64)<br>device : macbook Air M3</p><h3 id="2-Current-performance-indicators"><a href="#2-Current-performance-indicators" class="headerlink" title="2  Current performance indicators"></a>2  Current performance indicators</h3><p>using the tool（WebPageTest and LightHouse in incognito mode）to get the metrics result  of binance ,okx and tapbit</p><table><thead><tr><th></th><th>binance</th><th>okx</th><th>tapbit</th></tr></thead><tbody><tr><td>performance</td><td>91</td><td>92</td><td>67</td></tr><tr><td>SSR</td><td>YES</td><td>YES</td><td>NOT</td></tr></tbody></table><p><img src="/./images/script/performance_ssr.png" alt="performance_ssr"></p><p>url: <a href="https://www.tapbit.com/contract/futures/BTC-SWAP">https://www.tapbit.com/contract/futures/BTC-SWAP</a><br>online result <a href="https://www.webpagetest.org/result/250103_AiDcE7_FE/">https://www.webpagetest.org/result/250103_AiDcE7_FE/</a>  </p><p><img src="/./images/script/okx_performance.png" alt="okx_performance"></p><p><img src="/./images/script/binance_performance.png" alt="binance_performance"></p><p><img src="/./images/script/tapbit_performance.png" alt="tapbit_performance"></p><p>why SSR(Server-Side Rendering) has better performance score  than  CSR(Client-Side Rendering),the answer will be in the end of blog.</p><p>in the following blog ,we will use the local LightHouse data to talk  about tapbit.</p><h5 id="First-Contentful-Paint-FCP-The-first-text-or-image-is-painted"><a href="#First-Contentful-Paint-FCP-The-first-text-or-image-is-painted" class="headerlink" title="First Contentful Paint, FCP :  (The first text or image is painted)"></a>First Contentful Paint, FCP :  (The first text or image is painted)</h5><p> 2.3 s</p><p> the recommended value of FCP is 1.8 s by <a href="https://web.dev/articles/fcp#what-is-a-good-fcp-score">https://web.dev/articles/fcp#what-is-a-good-fcp-score</a></p><h5 id="Largest-Contentful-Paint-LCP-（The-largest-text-or-image-is-painted）"><a href="#Largest-Contentful-Paint-LCP-（The-largest-text-or-image-is-painted）" class="headerlink" title="Largest Contentful Paint, LCP  :（The largest text or image is painted）"></a>Largest Contentful Paint, LCP  :（The largest text or image is painted）</h5><p>2.9 s </p><p>the recommended value of LCP is 2.5 s by <a href="https://web.dev/articles/fcp#what-is-a-good-fcp-score">https://web.dev/articles/fcp#what-is-a-good-fcp-score</a></p><h5 id="Speed-Index-SI-（how-quickly-the-contents-of-a-page-are-visibly-populated）"><a href="#Speed-Index-SI-（how-quickly-the-contents-of-a-page-are-visibly-populated）" class="headerlink" title="Speed Index, SI :（how quickly the contents of a page are visibly populated）:"></a>Speed Index, SI :（how quickly the contents of a page are visibly populated）:</h5><p>3.9 s</p><p><img src="/./images/script/current-performance.png" alt="current-performance"></p><h5 id="Overall-performance-rating"><a href="#Overall-performance-rating" class="headerlink" title="Overall performance rating :"></a>Overall performance rating :</h5><p>67  </p><p><img src="/./images/script/overall.png" alt="overall"></p><h2 id="3-Optimization-suggestions"><a href="#3-Optimization-suggestions" class="headerlink" title="3  Optimization suggestions"></a>3  Optimization suggestions</h2><p>we can see  the LCP  and FCP are not in the suggested  value.</p><p> for FCP  &amp;&amp; LCP  we can do as follows:</p><h4 id="Eliminate-render-blocking-resources"><a href="#Eliminate-render-blocking-resources" class="headerlink" title="Eliminate render-blocking resources"></a>Eliminate render-blocking resources</h4><p><img src="/./images/script/blocking-requests.png" alt="blocking-request"></p><p><img src="/./images/script/script-no-deffer.png" alt="script-no-deffer"><br>Scripts without the defer attribute block subsequent script execution</p><p>as we can see in the network pannel<br><img src="/./images/script/script-network.png" alt="script-network"><br>The total cost Time of the four scripts are 568+731+699+731 which exceeds to 2729 ms ,Optimally, a single script load time of 699ms should suffice under ideal conditions.</p><p>The script<br><a href="https://cdn.tapbit.mobi/libs/googleTag/index.js">https://cdn.tapbit.mobi/libs/googleTag/index.js</a>  size  is 1kib  and  blocking is 380 ms<br>,we can  put this script in inline html to reduce the requests and load time.</p><p><img src="/./images/script/script-unused.png" alt="script-unused"><br>vendorjs’s size has over 1mb . the recommanded size is not greater than 300kb  <a href="/2025/01/02/How-large-should-a-JS-file-be/" target="_blank">(why 300 kb?)</a><br>, try reduce the size by code splitting （<a href="https://webpack.js.org/guides/code-splitting/"><code>code-splitting</code></a>） or remove unused router . Splitting files allows for the full utilization of HTTP&#x2F;2’s multiplexing mechanism, reducing JavaScript load time.</p><h4 id="Preconnect-to-required-origins"><a href="#Preconnect-to-required-origins" class="headerlink" title="Preconnect to required origins"></a>Preconnect to required origins</h4><p><img src="/./images/script/script-orions.png" alt="script-orions"><br><a href="https://cdn.aisecurius.com/">https://cdn.aisecurius.com</a>   config  dns-prefetch property<br><a href="https://a-pc.tapbit.com/">https://a-pc.tapbit.com</a>  config  preconnect  property</p><p>preconnect<br>eg.  <code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//cdn.aisecurius.com&quot;&gt;</code><br>    <code>&lt;link rel=&quot;preconnect&quot; href=&quot;https://a-pc.tapbit.com&quot;&gt;</code></p><p>besides<br><img src="/./images/script/script-dns-prefetch.png" alt="dns-prefetch"><br>the unused  dns-prefetch can be removed .because this  will cost extra bandwidth</p><h4 id="Reduce-unused-CSS"><a href="#Reduce-unused-CSS" class="headerlink" title="Reduce unused CSS"></a>Reduce unused CSS</h4><p><img src="/./images/script/script-unused-css.png" alt="unused-css"><br>reduce unused css  to limit the size of css files ,chrome coverage tools can help a lot</p><h3 id="4-Summary-and-Next-Steps"><a href="#4-Summary-and-Next-Steps" class="headerlink" title="4 Summary and Next Steps"></a>4 Summary and Next Steps</h3><h4 id="4-1-Performance-Monitor"><a href="#4-1-Performance-Monitor" class="headerlink" title="4.1 Performance Monitor"></a>4.1 Performance Monitor</h4><p>   <img src="/./images/script/script-performance.png" alt="performance"></p><p>CPU usage is hovering around 50% in the curve, but we haven’t encountered any performance issues yet.</p><p>there is one bug  When switching to the background, Chrome’s CPU usage spikes to 100%, and it drops back down when switching to the foreground. It could be a Chrome bug or switching to the background, triggered by certain scripts; further investigation is needed to identify the cause.<br><img src="/./images/script/cpu100.png" alt="cpu100"></p><h4 id="4-2-browser-crash"><a href="#4-2-browser-crash" class="headerlink" title="4.2 browser crash"></a>4.2 browser crash</h4><p>I encountered several browser crashes while analyzing the webpage ,the error code is 5 or 10.<br><img src="/./images/script/errorcode10.png" alt="alt text"><br>there are many reasons about crash, such as  Extension Conflicts,Hardware Acceleration Issues,Corrupted User Data,Software Conflicts, and Insufficient Resources. As other tabs doesn’t crash, I guess the reason may be out of memory.</p><p>open browser ,load page wait for 1 hour</p><p>compare the memory usage  and nodes</p><table><thead><tr><th></th><th>binance</th><th>okx</th><th>tapbit</th></tr></thead><tbody><tr><td>JS heap size</td><td>372</td><td>144</td><td>284</td></tr><tr><td>dom nodes</td><td>6462</td><td>7000</td><td>280982</td></tr><tr><td>JS event listners</td><td>4401</td><td>4366</td><td>60906</td></tr></tbody></table><!-- ![js_heap](./images/script/js_heap.png) --><!-- ![dom_nodes](./images/script/dom_nodes.png) --><p><img src="/./images/script/performance_metric.png" alt="performance_metric"></p><p>The dom nodes is 43 times of binance .As time goes on, the number of nodes gradually increases. Is this due to invalid renders or duplicate nodes? We need to pinpoint the cause. ,in the curve the JS heap is increasing until 700MB ,may be this is the cause of browser crash. we can use  Chrome Heap Profiler to check reason and  reduce the unnecessary DOMs or use Virtual DOM.</p><!-- ![binance-usage](./images/script/binance-usage.png) --><p><img src="/./images/script/binance-usage-listeners.png" alt="binance-usage-listeners"></p><p><img src="/./images/script/okx-usage-listeners.png" alt="okx-usage-listeners"></p><p><img src="/./images/script/tapbit-usage-listeners2.png" alt="tapbit-usage-listeners2"></p><p><img src="/./images/script/tapbit-usage.png" alt="tapbit-usage"></p><!-- #### heap && dom nodes![dom_nodes](./images/script/heap_nodes.png) --><h4 id="4-2-images"><a href="#4-2-images" class="headerlink" title="4.2 images"></a>4.2 images</h4><p><img src="/./images/script/script-logo.png" alt="logo"><br>The logo’s render size is 85  x 24 px  but the img size is 227 x  64 px .this is too large for the render, even for the 2x images .</p><p>The other images on the page can use the native solution for lazy loading (async), with updates to follow.</p><h4 id="4-3-SSR-CSR"><a href="#4-3-SSR-CSR" class="headerlink" title="4.3 SSR &amp; CSR"></a>4.3 SSR &amp; CSR</h4><p>why SSR has better performance score  than  CSR</p><p>In SSR, the server sends a fully rendered HTML page to the browser. This means the browser can start displaying content immediately, providing a faster perceived loading time for the user. In CSR, the browser needs to download and execute JavaScript before rendering any content, leading to a delay.</p><p>SSR is better in seo ,because the html and meta tag are easily be readed  .but SSR  have extra cost for server.</p><p>CSR can enable Pre-rendering to get the rendered html.</p><h4 id="Comparison-of-web-module-versions"><a href="#Comparison-of-web-module-versions" class="headerlink" title="Comparison of web module versions"></a>Comparison of web module versions</h4><table><thead><tr><th></th><th>binance</th><th>okx</th><th>tapbit</th></tr></thead><tbody><tr><td>tradingview</td><td>TT v27.000 (@ 2024-01-17T15:06:14.900Z)</td><td>TT v28.4.0 ( @ 2024-11-29T13:18:46.094Z)</td><td>CL v22.032 (@ 2022-07-06T11:53:07.702Z)</td></tr><tr><td>react</td><td>18.2.0</td><td>18.3.1</td><td>16.14.0</td></tr><tr><td>sentry</td><td>7.38.0</td><td>7.74.1</td><td>8.31.0</td></tr></tbody></table><p>Based on experience, newer versions generally bring better performance, but the compatibility issues during the upgrade process can result in considerable work. Comprehensive testing is required to ensure quality, which comes with a significant cost. It’s important to weigh these factors before proceeding.</p><h4 id="References"><a href="#References" class="headerlink" title="References"></a>References</h4><p><a href="https://web.dev/articles/rail">https://web.dev/articles/rail</a> </p><h4 id="SEO-Analysis-Report"><a href="#SEO-Analysis-Report" class="headerlink" title="SEO Analysis Report"></a>SEO Analysis Report</h4><p>Is SEO limited to TDK? What are the purposes of SEO? What is the relationship between front-end development and SEO? How can we evaluate whether a website’s SEO is well-executed?</p><p>Stay tuned for the next article!</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>How large should a JS file be</title>
      <link href="/2025/01/02/How-large-should-a-JS-file-be/"/>
      <url>/2025/01/02/How-large-should-a-JS-file-be/</url>
      
        <content type="html"><![CDATA[<p>In a mobile-first world, ensuring fast JavaScript loading is critical for providing a seamless user experience. When using mobile or 4G networks, a 300 KB JavaScript file can theoretically be downloaded within 1 second, assuming a bandwidth of 2 Mbps. Here’s how the calculation works:</p><p>Bandwidth Conversion:<br>2 Mbps &#x3D; 2048 Kbps  2Mbps &#x3D; 2 * 1024 Kbps &#x3D; 2048 Kbps ≈ 256 KB&#x2F;s<br>This means 256 KB&#x2F;s of data can be downloaded per second.</p><p>Download Time:<br>300 KB ÷ 256 KB&#x2F;s ≈ 1.17 seconds</p><p>While this sounds promising, real-world performance can be affected by network latency, congestion, and resource competition. To mitigate these issues, let’s explore some strategies to optimize JavaScript loading.</p><p>Key Optimization Strategies</p><ol><li>Compress JavaScript Files<br>Reducing file size through minification tools like Terser or UglifyJS can significantly cut download time. For example, compressing a 500 KB file to 300 KB saves 40% of the load time.</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx terser input.js -o output.min.js</span><br></pre></td></tr></table></figure><ol start="2"><li>Leverage CDN<br>Serving JavaScript files via a Content Delivery Network (CDN) such as Cloudflare or Akamai to reduces latency by delivering resources from servers closer to the user.</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>Use Async and Defer Attributes<br>Prevent JavaScript from blocking page rendering by adding async or defer attributes.</li></ol><p>Async Example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot; async&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Defer Example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot; defer&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li>Implement Code Splitting<br>Load only the required JavaScript for the current page or feature, reducing the initial payload.</li></ol><p>javascript</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import(/* webpackChunkName: &quot;moduleA&quot; */ &#x27;./moduleA&#x27;).then((moduleA) =&gt; &#123;</span><br><span class="line">  moduleA.init();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="5"><li>Inline Critical Scripts<br>For essential scripts, inline them directly into the HTML to eliminate additional network requests.</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  console.log(&#x27;This is inline JavaScript.&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Conclusion<br>With proper optimization techniques like compression, CDN usage, asynchronous loading, and code splitting, JavaScript files can be efficiently loaded even on mobile networks. These strategies ensure a faster, smoother user experience, aligning with modern web performance standards.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>two common use of closure</title>
      <link href="/2024/11/17/commonUseOfClosure/"/>
      <url>/2024/11/17/commonUseOfClosure/</url>
      
        <content type="html"><![CDATA[<!-- ### two common use of closure --><p>there are two common use of closure: pass function as parameter,pass function as return value</p><h2 id="pass-function-as-parameter"><a href="#pass-function-as-parameter" class="headerlink" title="pass function as parameter"></a>pass function as parameter</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function a1()&#123;</span><br><span class="line">    let a = 100;</span><br><span class="line">    return function()&#123;</span><br><span class="line">        console.log(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let a = 200;</span><br><span class="line">let b = a1()</span><br><span class="line">b();</span><br><span class="line">// output 100;</span><br></pre></td></tr></table></figure><p>Explanation:<br>In this example, the function a1 defines a local variable a (with a value of 100) and returns an inner function. The inner function forms a closure over a. When b is executed, it remembers the environment where it was defined, so it uses the a from a1, not the outer a &#x3D; 200.</p><h2 id="pass-function-as-return-value"><a href="#pass-function-as-return-value" class="headerlink" title="pass function as return value"></a>pass function as return value</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function fn(cb)&#123;</span><br><span class="line">    let a = 200;</span><br><span class="line">    cb()</span><br><span class="line">&#125;</span><br><span class="line">let a = 100;</span><br><span class="line">function fn2()&#123;</span><br><span class="line">    console.log(a)</span><br><span class="line">&#125;</span><br><span class="line">fn(fn2);</span><br><span class="line">//output 100</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Explanation:<br>Here, the function fn takes a callback function cb as a parameter. When cb is executed inside fn, it still retains its original scope from the outer environment where it was defined. In this case, fn2 is defined in the global scope, so it uses the global variable a &#x3D; 100, not the a declared inside fn.</p><p>Why Both Results Are 100?<br>The key concept of closures is lexical scoping, meaning a function’s variables are resolved based on where the function is defined, not where it is called.</p><p>In the first example, the returned function remembers the variable a from its defining scope in a1 (value is 100).<br>In the second example, the function fn2 was defined in the global scope, so it uses the global variable a &#x3D; 100, even though it’s executed inside fn.<br>Closures ensure that functions “remember” the variables from their defining scope, regardless of where they are called.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>protoType and protoType Chain</title>
      <link href="/2024/11/16/protoType%20and%20%20protoType%20Chain/"/>
      <url>/2024/11/16/protoType%20and%20%20protoType%20Chain/</url>
      
        <content type="html"><![CDATA[<p>there is simple question how can you check if a variable is an Array。<br>the answer is easy </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr instanceof Array</span><br></pre></td></tr></table></figure><p>if result is true  ,arr is Array .otherwise  arr isn’t;</p><p>so there is another question：  what’s  principle behind instanceof in Javascript</p><p>let me explain</p><p>there’re two classes. People and Student . Student implements People</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class People&#123;</span><br><span class="line">    constructor(name)&#123;</span><br><span class="line">        this.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    eat()&#123;</span><br><span class="line">        console.log(`$&#123;this.name&#125; eat something`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Student extends People&#123;</span><br><span class="line">    constructor(name,number)&#123;</span><br><span class="line">        super(name); // the parent class handles this property</span><br><span class="line">        this.number =number;</span><br><span class="line">    &#125;</span><br><span class="line">    sayHi()&#123;</span><br><span class="line">        console.log(`name $&#123;this.name&#125;, no $&#123;this.number&#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const huck = new Student(&#x27;huck&#x27;,100);</span><br><span class="line">console.log(huck.name)</span><br><span class="line">console.log(huck.number)</span><br><span class="line">huck.sayHi();</span><br></pre></td></tr></table></figure><p>“huck” is an instance of Student;</p><p>Here are the 3 basic rules in Prototype<br>“Every class in Javascript has a explicit prototype property”<br>“Every instance in Javascript has implicit prototype, <strong>proto</strong>“<br>“An instance’s <strong>proto</strong> prototype points to corresponding class”</p><p>take the value “huck” for example </p><p>huck has a <code>__proto__</code>  points to Student’s prototype.</p><p><img src="/./images/prototype/p1@2x.png" alt="protytype"></p><p>and Student‘s  <code>__proto__</code>  points to People’s prototype.</p><p><img src="/./images/prototype/p2@2x.png" alt="protytype"></p><p>and People‘s  <code>__proto__</code>  points to Object’s prototype.</p><p>Object‘s  <code>__proto__</code>  points to null</p><p><img src="/./images/prototype/p3@2x.png" alt="protytype"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>When to Use === and ==</title>
      <link href="/2024/11/13/When%20to%20Use%20===%20and%20==/"/>
      <url>/2024/11/13/When%20to%20Use%20===%20and%20==/</url>
      
        <content type="html"><![CDATA[<!-- ### When to Use === and == --><h4 id="Use-the-operator-only-when-checking-for-null-or-undefined-In-all-other-cases-use-for-strict-equality"><a href="#Use-the-operator-only-when-checking-for-null-or-undefined-In-all-other-cases-use-for-strict-equality" class="headerlink" title="Use the &#x3D;&#x3D; operator only when checking for null or undefined. In all other cases, use &#x3D;&#x3D;&#x3D; for strict equality."></a>Use the &#x3D;&#x3D; operator only when checking for null or undefined. In all other cases, use &#x3D;&#x3D;&#x3D; for strict equality.</h4><p>For example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if(obj.a == null)&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>is equivalent to:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (obj.a === null || obj.a === undefined) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Implement deepClone manually</title>
      <link href="/2024/11/13/deepClone/"/>
      <url>/2024/11/13/deepClone/</url>
      
        <content type="html"><![CDATA[<!-- #### Implement deepClone manually --><h5 id="Reason"><a href="#Reason" class="headerlink" title="Reason:"></a>Reason:</h5><p>Reference types will share the same address, so when we use &#x3D; operator, if there is modification on the new object, the value on the old object will change too.</p><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><p>Iterate the Object recursively. If there is reference type, we create a new one and copy all the value type to the new reference type.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function deepClone(obj = &#123;&#125;) &#123;</span><br><span class="line">    // null can&#x27;t be treated as object</span><br><span class="line">    if (typeof obj != &quot;object&quot; || obj === null) &#123;</span><br><span class="line">        console.log(obj, &quot;obj&quot;);</span><br><span class="line">        return obj;</span><br><span class="line">    &#125;</span><br><span class="line">    let result;</span><br><span class="line">    // create a new reference type</span><br><span class="line">    if (obj instanceof Array) &#123;</span><br><span class="line">        result = [];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        result = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    for (let key in obj) &#123;</span><br><span class="line">        // make sure key is not on prototype</span><br><span class="line">        if (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">            result[key] = deepClone(obj[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">let obj1 = &#123; x: 100, y: 200, z: [1, 2, 3], c: null &#125;;</span><br><span class="line">let obj2 = deepClone(obj1);</span><br><span class="line">console.log(obj2);</span><br><span class="line">obj2.x = 102;</span><br><span class="line">console.log(obj2, obj1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>decode message</title>
      <link href="/2024/03/26/decode%20message/"/>
      <url>/2024/03/26/decode%20message/</url>
      
        <content type="html"><![CDATA[<p>There is a interview question on bfe.dev about decode-message. The link is below </p><p><a href="https://bigfrontend.dev/problem/decode-message">https://bigfrontend.dev/problem/decode-message</a></p><p>Your are given a 2-D array of characters. There is a hidden message in it.</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I B C A L K A</span><br><span class="line">D R F C A E A</span><br><span class="line">G H O E L A D</span><br></pre></td></tr></table></figure><p>col and row are marked with number which start from 0. The number of col is  0 ~ 6 ,and the number of row is 0~2<br>The way to collect the message is as follows</p><ol><li>start at top left</li><li>move diagonally down right</li><li>when cannot move any more, try to switch to diagonally up right</li><li>when cannot move any more, try switch to diagonally down right, repeat 3</li><li>stop when cannot neither move down right or up right. the character on the path is the message<br>for the input above, IROCLED should be returned<br>notes:<br>if no characters could be collected, return empty string</li></ol><p>now we have a matrix of 3 rows , 7 columns.<br>we’ll start at  coordinates   [0,0] . and next we’ll move to [1,1] ,the rest coordinates will be [2,2]<br>[3,1]  [4,0] [5,1] [6,2] </p><p>so in the function  decode,it recieves  a 2D array</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @param &#123;string[][]&#125; message</span><br><span class="line"> * @return &#123;string&#125;</span><br><span class="line"> */</span><br><span class="line">function decode(message) &#123;</span><br><span class="line">  // your code here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">message=[</span><br><span class="line">[I, B, C, A, L, K, A],</span><br><span class="line">[D, R, F, C, A, E, A],</span><br><span class="line">[G, H, O, E, L,A, D]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>The value of variable   rows will be the lenght of messsage ,that’s  message.length ,and it is 3 .<br>The  value of  varibable columns will be message[0].length ,and  it’s 7 .<br>if the rows or columns is 0 , the function should return.<br>and we set the default value  of variable  result as ‘’ ;<br>we set row as 0 and  col as 0;<br>we use a while loop  to get every col in columns,codes are blow</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @param &#123;string[][]&#125; message</span><br><span class="line"> * @return &#123;string&#125;</span><br><span class="line"> */</span><br><span class="line">function decode(message) &#123;</span><br><span class="line">  if(message.length === 0)return &#x27;&#x27;;</span><br><span class="line">  if(message[0].length===0) return &#x27;&#x27;;</span><br><span class="line">  let rows = message.length;</span><br><span class="line">  let cols = message[0].length;</span><br><span class="line"></span><br><span class="line">  let result = &#x27;&#x27;;</span><br><span class="line">  let row = 0;</span><br><span class="line">  let col = 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   we use a while loop to get every col in columns<br> so in the loop  col will alway plus 1    ,row will plus the direction which name is directionY ,when row is bigger than 2 ,that is row&gt; rows-1 ,directionY should be -1 ,row have to minus 2<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(row&gt;rows-1)&#123;</span><br><span class="line">  directonY = -1;</span><br><span class="line">  row -=2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>if row is small than 0 ,we in the top of matrix , In this case directionY should be 1 ,row have to add 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(row&lt;0)&#123;</span><br><span class="line">  directonY = 1;</span><br><span class="line">  row +=2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>row also have a  limitation ,as we  doing row-&#x3D;2 ,and row +&#x3D;2; we can’t let row out of the matrix .so row must bigger than -1 ,and &lt; rows.<br>the function is blow ,and it passed the test.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @param &#123;string[][]&#125; message</span><br><span class="line"> * @return &#123;string&#125;</span><br><span class="line"> */</span><br><span class="line">function decode(message) &#123;</span><br><span class="line">  if(message.length === 0)return &#x27;&#x27;;</span><br><span class="line">  if(message[0].length===0) return &#x27;&#x27;;</span><br><span class="line">  let rows = message.length;</span><br><span class="line">  let cols = message[0].length;</span><br><span class="line"></span><br><span class="line">  let result = &#x27;&#x27;;</span><br><span class="line">  let row = 0;</span><br><span class="line">  let col = 0;</span><br><span class="line">  let directionY = 1;</span><br><span class="line">  /**</span><br><span class="line">  when col = 3 ,row =  3  </span><br><span class="line">  rows =3  , 3 &gt; 3-1</span><br><span class="line">  */</span><br><span class="line">  while(col &lt; cols &amp;&amp; row &gt;-1 &amp;&amp; row&lt;rows)&#123;</span><br><span class="line">    result += message[row][col]</span><br><span class="line">    col+=1</span><br><span class="line">    row +=directionY</span><br><span class="line">  </span><br><span class="line">  if(row&gt;rows-1)&#123;</span><br><span class="line">    directionY = -1;</span><br><span class="line">    row -= 2</span><br><span class="line">  &#125;else if(row&lt;0)&#123;</span><br><span class="line">     directionY = 1;</span><br><span class="line">    row += 2</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return result</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Implementing the apply Function Manually</title>
      <link href="/2024/02/26/ImplementingTheApplyFunctionManually/"/>
      <url>/2024/02/26/ImplementingTheApplyFunctionManually/</url>
      
        <content type="html"><![CDATA[<!-- ##  Implementing the apply Function Manually --><h3 id="Steps-to-implement-the-apply-function"><a href="#Steps-to-implement-the-apply-function" class="headerlink" title="Steps to implement the apply function:"></a>Steps to implement the apply function:</h3><ol><li><p>Determine if the calling object is a function. Even though it’s defined on the function’s prototype, there may be instances where it is invoked using methods like call.</p></li><li><p>Check if the incoming context object exists; if not, set it to window.</p></li><li><p>Assign the function as a property of the context object.</p></li><li><p>Determine if the parameter values have been passed in.</p></li><li><p>Invoke the method using the context object and save the returned result.</p></li><li><p>Remove the property that was just added.</p></li><li><p>Return the result</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// apply </span><br><span class="line">Function.prototype.myApply = function(context) &#123;</span><br><span class="line">  </span><br><span class="line">  if (typeof this !== &quot;function&quot;) &#123;</span><br><span class="line">    throw new TypeError(&quot;Error&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  let result = null;</span><br><span class="line">  // check context  or set to window</span><br><span class="line">  context = context || window;</span><br><span class="line">  // set funcion</span><br><span class="line">  context.fn = this;</span><br><span class="line">  // call the method</span><br><span class="line">  if (arguments[1]) &#123;</span><br><span class="line">    result = context.fn(...arguments[1]);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125;</span><br><span class="line">  // del property</span><br><span class="line">  delete context.fn;</span><br><span class="line">  return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Implementing-the-bind-Function-Manually"><a href="#Implementing-the-bind-Function-Manually" class="headerlink" title="Implementing the bind Function Manually"></a>Implementing the bind Function Manually</h3><h4 id="Steps-to-implement-the-bind-function"><a href="#Steps-to-implement-the-bind-function" class="headerlink" title="Steps to implement the bind function:"></a>Steps to implement the bind function:</h4><ol><li><p>Determine if the calling object is a function. Even though it’s defined on the function’s prototype, there may be instances where it is invoked using methods like call.</p></li><li><p>Save a reference to the current function and retrieve the rest of the passed-in parameter values.</p></li><li><p>Return a new function.</p></li><li><p>Internally, the function uses apply to bind the function call. It’s important to account for the function being used as a constructor. In such cases, the current function’s ‘this’ needs to be passed to apply, while in all other cases, the specified context object is passed.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// bind </span><br><span class="line">Function.prototype.myBind = function(context) &#123;</span><br><span class="line">  </span><br><span class="line">  if (typeof this !== &quot;function&quot;) &#123;</span><br><span class="line">    throw new TypeError(&quot;Error&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  // get parm</span><br><span class="line">  var args = [...arguments].slice(1),</span><br><span class="line">      fn = this;</span><br><span class="line">  return function Fn() &#123;</span><br><span class="line">    return fn.apply(</span><br><span class="line">      this instanceof Fn ? this : context,</span><br><span class="line">      args.concat(...arguments)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Flatten the array</title>
      <link href="/2024/02/05/FlattenArray/"/>
      <url>/2024/02/05/FlattenArray/</url>
      
        <content type="html"><![CDATA[ <!-- ### Flatten the array --><h4 id="1-Recursive-implementation"><a href="#1-Recursive-implementation" class="headerlink" title="(1) Recursive implementation"></a>(1) Recursive implementation</h4><p>The common idea behind recursion is straightforward, involving a circular recursion approach where each item is iterated over. If an item is still an array, the process continues recursively to achieve the concatenation of each array item.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, 4, 5]]];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">  let result = [];</span><br><span class="line"></span><br><span class="line">  for(let i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">    if(Array.isArray(arr[i])) &#123;</span><br><span class="line">      result = result.concat(flatten(arr[i]));</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      result.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br><span class="line">flatten(arr);  //  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure><h4 id="2-reduce-function-iteration"><a href="#2-reduce-function-iteration" class="headerlink" title="(2) reduce function iteration"></a>(2) reduce function iteration</h4><p>From the ordinary recursive function described above, it’s clear that each array item is processed individually. In fact, the reduce method can also be used for array concatenation, thus simplifying the code from the first method. The transformed code is as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, 4]]];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">    return arr.reduce(function(prev, next)&#123;</span><br><span class="line">        return prev.concat(Array.isArray(next) ? flatten(next) : next)</span><br><span class="line">    &#125;, [])</span><br><span class="line">&#125;</span><br><span class="line">console.log(flatten(arr));//  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure><h4 id="3-Extension-operator-implementation"><a href="#3-Extension-operator-implementation" class="headerlink" title="(3) Extension operator implementation"></a>(3) Extension operator implementation</h4><p>This method’s implementation involves the use of the spread operator and the some method, both used in conjunction to achieve array flattening:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, 4]]];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">    while (arr.some(item =&gt; Array.isArray(item))) &#123;</span><br><span class="line">        arr = [].concat(...arr);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">console.log(flatten(arr)); //  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure><h4 id="（4）split-and-toString"><a href="#（4）split-and-toString" class="headerlink" title="（4）split and toString"></a>（4）split and toString</h4><p>The split and toString methods are used to flatten the array. Since the array has a toString method by default, you can convert the array directly to a comma-separated string, and then use the split method to convert the string back to the array, as shown in the following code:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, 4]]];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">    return arr.toString().split(&#x27;,&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(flatten(arr)); //  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure><p>Using these two methods, a multidimensional array can be directly converted into a comma-separated string, which is then split back into an array.</p><p>####(5) flat in ES6</p><p>We can also directly call the flat method in ES6 to implement array flattening. Syntax for the flat method: arr.flat([depth])</p><p>depth is the parameter of flat, depth is the expansion depth of the array can be passed (the default is not filled, the value is 1), that is, expand a layer of array. If the number of layers is uncertain, the parameter can be passed into Infinity, which means that no matter how many layers are expanded:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, 4]]];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">  return arr.flat(Infinity);</span><br><span class="line">&#125;</span><br><span class="line">console.log(flatten(arr)); //  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure><p>As you can see, a nested array of two layers achieves the desired effect by setting the parameter of the flat method to Infinity. In fact, it can also be set to 2, which can also achieve this effect. In the programming process, if the number of nested layers of the array is uncertain, it is best to use Infinity directly, which can achieve flatness.</p><h4 id="6-RE-and-JSON-methods"><a href="#6-RE-and-JSON-methods" class="headerlink" title="(6) RE and JSON methods"></a>(6) RE and JSON methods</h4><p>The toString method is already used in the fourth method, which still uses the JSON.stringify method to convert it to a string, then filters out the array square brackets in the string through regular expressions, and finally converts it to an array using JSON.parse:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, [2, [3, [4, 5]]], 6];</span><br><span class="line">function flatten(arr) &#123;</span><br><span class="line">  let str = JSON.stringify(arr);</span><br><span class="line">  str = str.replace(/(\[|\])/g, &#x27;&#x27;);</span><br><span class="line">  str = &#x27;[&#x27; + str + &#x27;]&#x27;;</span><br><span class="line">  return JSON.parse(str); </span><br><span class="line">&#125;</span><br><span class="line">console.log(flatten(arr)); //  [1, 2, 3, 4，5]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Implement deep copy</title>
      <link href="/2024/02/05/deepCopy/"/>
      <url>/2024/02/05/deepCopy/</url>
      
        <content type="html"><![CDATA[<!-- ### Implement deep copy --><p>  ○ Shallow copy: Shallow copy refers to copying the attribute value of one object to another object. If the attribute value is a reference type, then the address of the reference is copied to the object, so the two objects will have a reference of the same reference type. Shallow copying can be implemented using Object.assign() and the spread operator.</p><p>  ○ Deep copy: Compared to shallow copy, if a property value is a reference type, deep copy creates a reference type and copies the corresponding value to it, so the object gets a new reference type instead of a reference of the original type. Deep copying can be  achieved for some objects using two JSON functions. However, due to JSON’s stricter object format compared to JavaScript’s, this method fails if the object contains functions or Symbol types.</p><h4 id="（1）JSON-stringify"><a href="#（1）JSON-stringify" class="headerlink" title="（1）JSON.stringify()"></a>（1）JSON.stringify()</h4><p>  ○ JSON.parse(JSON.stringify(obj)) is one of the most commonly used deep copy methods. Its principle is to use JSON.stringify to serialize the JavaScript object into a JSON string, and then use JSON.parse() to deserialize (restore) the JavaScript object.</p><p>  ○ This method can be a simple implementation of deep copy, but there is a problem -  functions, undefined, and Symbol values in the copied object will be lost after processing with JSON.stringify().</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let obj1 = &#123;  a: 0,</span><br><span class="line">              b: &#123;</span><br><span class="line">                 c: 0</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">let obj2 = JSON.parse(JSON.stringify(obj1));</span><br><span class="line">obj1.a = 1;</span><br><span class="line">obj1.b.c = 1;</span><br><span class="line">console.log(obj1); // &#123;a: 1, b: &#123;c: 1&#125;&#125;</span><br><span class="line">console.log(obj2); // &#123;a: 0, b: &#123;c: 0&#125;&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Library-lodash’s-cloneDeep-method"><a href="#2-Library-lodash’s-cloneDeep-method" class="headerlink" title="(2) Library lodash’s.cloneDeep method"></a>(2) Library lodash’s.cloneDeep method</h4><p>The library also provides _.cloneDeep() for Deep Copying.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var _ = require(&#x27;lodash&#x27;);</span><br><span class="line">var obj1 = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: &#123; f: &#123; g: 1 &#125; &#125;,</span><br><span class="line">    c: [1, 2, 3]</span><br><span class="line">&#125;;</span><br><span class="line">var obj2 = _.cloneDeep(obj1);</span><br><span class="line">console.log(obj1.b.f === obj2.b.f);// false</span><br></pre></td></tr></table></figure><h4 id="3-Handwritten-Deep-Copy-Function-Implementation"><a href="#3-Handwritten-Deep-Copy-Function-Implementation" class="headerlink" title="(3) Handwritten Deep Copy Function Implementation"></a>(3) Handwritten Deep Copy Function Implementation</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function deepCopy(object) &#123;</span><br><span class="line">  if (!object || typeof object !== &quot;object&quot;) return;</span><br><span class="line"></span><br><span class="line">  let newObject = Array.isArray(object) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  for (let key in object) &#123;</span><br><span class="line">    if (object.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObject[key] =</span><br><span class="line">        typeof object[key] === &quot;object&quot; ? deepCopy(object[key]) : object[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return newObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>What is the purpose of the newly added primitive data type &quot;Symbol&quot;?</title>
      <link href="/2024/01/28/Symbol/"/>
      <url>/2024/01/28/Symbol/</url>
      
        <content type="html"><![CDATA[<!-- ### What is the purpose of the newly added primitive data type "Symbol"? --><h4 id="Discuss-conceptual-questions"><a href="#Discuss-conceptual-questions" class="headerlink" title="Discuss conceptual questions"></a>Discuss conceptual questions</h4><p>‘Symbol’ is a primitive data type introduced in ES6. Its primary purpose is to create a unique identifier, which is used in scenarios such as naming object properties, defining constants, and so on.</p><p>Understanding with Examples</p><p>Each ‘Symbol’ is unique and can be used as a property name for objects, which helps to avoid conflicts with property names. For example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const s1 = Symbol();</span><br><span class="line">const s2 = Symbol();</span><br><span class="line">const obj = &#123;</span><br><span class="line"> [s1]: &#x27;hello&#x27;,</span><br><span class="line"> [s2]: &#x27;world&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(obj[s1]); // &quot;hello&quot;console.log(obj[s2]); // &quot;world&quot;</span><br></pre></td></tr></table></figure><p>In addition, symbol can also be used to implement constants or enumeration values, which are immutable and unique, such as:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Colors = &#123;</span><br><span class="line"> Red: Symbol(&#x27;Red&#x27;),</span><br><span class="line"> Green: Symbol(&#x27;Green&#x27;),</span><br><span class="line"> Blue: Symbol(&#x27;Blue&#x27;)</span><br><span class="line">&#125;;</span><br><span class="line">console.log(Colors.Red); // Symbol(Red)console.log(Colors.Green); // Symbol(Green)console.log(Colors.Blue); // Symbol(Blue)</span><br></pre></td></tr></table></figure><p>As Symbol is a primitive data type, it offers high performance and reliability, making it suitable for scenarios requiring efficient and secure creation and usage of identifiers.</p><h3 id="Important-Considerations"><a href="#Important-Considerations" class="headerlink" title="Important Considerations"></a>Important Considerations</h3><p>Another significant characteristic of Symbol is that it does not appear in object property iteration methods like for…in, for…of, Object.keys(), Object.getOwnPropertyNames(), and so on. Therefore, it can be used to define properties that should not be iterated over, such as internal implementation details or hidden attributes.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>What are the differences in asynchronous loading of JS scripts?</title>
      <link href="/2024/01/28/asynchronousLoading/"/>
      <url>/2024/01/28/asynchronousLoading/</url>
      
        <content type="html"><![CDATA[<h3 id="What-are-the-differences-in-asynchronous-loading-of-JS-scripts"><a href="#What-are-the-differences-in-asynchronous-loading-of-JS-scripts" class="headerlink" title="What are the differences in asynchronous loading of JS scripts?"></a>What are the differences in asynchronous loading of JS scripts?</h3><h2 id="In-Web-applications-the-asynchronous-loading-of-JavaScript-scripts-can-be-achieved-in-the-following-ways"><a href="#In-Web-applications-the-asynchronous-loading-of-JavaScript-scripts-can-be-achieved-in-the-following-ways" class="headerlink" title="In Web applications, the asynchronous loading of JavaScript scripts can be achieved in the following ways:"></a>In Web applications, the asynchronous loading of JavaScript scripts can be achieved in the following ways:</h2><p>  a. Dynamically create a <script> tag and set its src attribute to the URL of the script to be loaded. You can use the onload or onreadystatechange event to check if the script has finished loading.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const script = document.createElement(&#x27;script&#x27;);</span><br><span class="line">script.src = &#x27;path/to/script.js&#x27;;</span><br><span class="line">script.onload = function() &#123;</span><br><span class="line"> // </span><br><span class="line">&#125;;</span><br><span class="line">document.body.appendChild(script);</span><br></pre></td></tr></table></figure><p>  b. Use the XMLHttpRequest object or the Fetch API to send an asynchronous request. After a successful request, parse the response text into JavaScript code, and then use the eval() function or Function() constructor to execute the script.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const xhr = new XMLHttpRequest();</span><br><span class="line">xhr.open(&#x27;GET&#x27;, &#x27;path/to/script.js&#x27;);</span><br><span class="line">xhr.onload = function() &#123;</span><br><span class="line"> const script = document.createElement(&#x27;script&#x27;);</span><br><span class="line"> script.textContent = xhr.responseText;</span><br><span class="line"> document.head.appendChild(script);</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure><h3 id="These-two-methods-can-be-used-to-implement-the-asynchronous-loading-of-JavaScript-scripts-Compared-to-synchronous-loading-asynchronous-loading-has-the-following-differences"><a href="#These-two-methods-can-be-used-to-implement-the-asynchronous-loading-of-JavaScript-scripts-Compared-to-synchronous-loading-asynchronous-loading-has-the-following-differences" class="headerlink" title="These two methods can be used to implement the asynchronous loading of JavaScript scripts. Compared to synchronous loading, asynchronous loading has the following differences:"></a>These two methods can be used to implement the asynchronous loading of JavaScript scripts. Compared to synchronous loading, asynchronous loading has the following differences:</h3><p>  a. Asynchronous loading can improve the loading speed and response performance of the page, and avoid the situation that the page is stuck due to JavaScript blocking.</p><p>  b. Asynchronous loading avoids the blocking caused by loading scripts and allows other resources of the page to load and render faster.</p><p>  c. Asynchronous loading allows you to flexibly control the loading sequence and the execution time of scripts, and dynamically load and unload scripts based on page requirements, thus improving page maintainability and expansibility.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Why is the result of &#39;typeof null&#39; an &#39;object&#39;?</title>
      <link href="/2024/01/21/typeof%20null/"/>
      <url>/2024/01/21/typeof%20null/</url>
      
        <content type="html"><![CDATA[<h3 id="Why-is-the-result-of-‘typeof-null’-an-‘object’"><a href="#Why-is-the-result-of-‘typeof-null’-an-‘object’" class="headerlink" title="Why is the result of ‘typeof null’ an ‘object’?"></a>Why is the result of ‘typeof null’ an ‘object’?</h3><h2 id="Kernel"><a href="#Kernel" class="headerlink" title="Kernel"></a>Kernel</h2><p>The result of ‘typeof null’ being “object” is a legacy issue of the JavaScript language.</p><p>In the original version of JavaScript, a 32-bit value was used to represent a variable, with the first 3 bits representing the type of the value. 000 represents an object, 010 represents a floating point number, 100 represents a string, 110 represents a Boolean value, and other values are all considered pointers.</p><p>In this representation, null was interpreted as an all-zero pointer, that is, it is considered to be an empty object reference, so the result of typeof null is “object”.</p><h2 id="expand"><a href="#expand" class="headerlink" title="expand"></a>expand</h2><p>Although this design is a legacy issue, it has become part of the JavaScript language for historical reasons and cannot be fixed. Therefore, it is recommended to use the strict equality operator (&#x3D;&#x3D;&#x3D;) when determining whether a variable is null.</p><p>Can variables globally declared with ‘let’ be accessed via the window object?</p><p>Variables declared with ‘let’ are not attached to the global ‘window’ object, and therefore cannot be accessed via ‘window.variablename’. This is different from variables declared with ‘var’, which are mounted on the global object and can be accessed via ‘window.variableName’.</p><p>For example, consider the following code:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let foo = &#x27;bar&#x27;;</span><br><span class="line">var baz = &#x27;qux&#x27;;</span><br><span class="line">console.log(window.foo); // undefined</span><br><span class="line">console.log(window.baz); // &#x27;qux&#x27;</span><br></pre></td></tr></table></figure><p>In this code, the variable ‘foo’ declared with ‘let’ is not accessible through ‘window.foo’, while the variable ‘baz’ declared with ‘var’ is accessible through ‘window.baz’.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>What are the uses of &#39;requestAnimationFrame&#39; and &#39;requestIdleCallback&#39;, respectively?</title>
      <link href="/2024/01/21/RequestAnimationFrame%20requestIdleCallback/"/>
      <url>/2024/01/21/RequestAnimationFrame%20requestIdleCallback/</url>
      
        <content type="html"><![CDATA[<!-- ### What are the uses of 'requestAnimationFrame' and 'requestIdleCallback', respectively? --><p>‘RequestAnimationFrame’ and ‘requestIdleCallback’ are both APIs used for performing animations or other high-performance tasks in the browser.</p><p>‘RequestAnimationFrame’ is a mechanism provided by browsers to request an animation frame. It executes a specified callback function right before the browser’s next redraw. The advantage of this approach is that it allows the browser to automatically perform complex calculations and rendering tasks during the next draw, thus preventing the browser from repeating the same tasks within a short period. Using requestAnimationFrame can lead to smoother animations and reduce flickering and stuttering on web pages.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function animate() &#123;</span><br><span class="line"> // requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line">requestAnimationFrame(animate);</span><br></pre></td></tr></table></figure><p>RequestIdleCallback is a relatively new API that performs a specified callback function when the browser is idle. The purpose of this API is to enable developers to perform time-consuming tasks such as computation and rendering when the browser is idle. The advantage of this is that it can improve the performance and responsiveness of the web page, while also avoiding blocking the main thread of the browser, resulting in a poor user experience.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function doWork(deadline) &#123;</span><br><span class="line"> while (deadline.timeRemaining() &gt; 0) &#123;</span><br><span class="line"> // code here</span><br><span class="line"> &#125;</span><br><span class="line"> if (other task) &#123;</span><br><span class="line"> requestIdleCallback(doWork);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">requestIdleCallback(doWork);</span><br></pre></td></tr></table></figure><p>Note that the callback function of requestIdleCallback accepts an IdleDeadline parameter, which contains information about the current idle time. Developers can use this parameter to schedule and optimize tasks according to the idle time of the browser.</p><p>In summary, requestAnimationFrame is suitable for animation tasks that need to be executed before the next drawing, while requestIdleCallback is suitable for time-consuming tasks that need to be executed when the browser is idle.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Differences among Ajax, axios, and fetch</title>
      <link href="/2024/01/14/Ajax%20axios%20fetch/"/>
      <url>/2024/01/14/Ajax%20axios%20fetch/</url>
      
        <content type="html"><![CDATA[<!-- # Differences among Ajax, axios, and fetch --><h2 id="（1）AJAX"><a href="#（1）AJAX" class="headerlink" title="（1）AJAX"></a>（1）AJAX</h2><p>Ajax stands for “Asynchronous JavaScript and XML.” It’s a way to make web pages interactive without reloading the whole page. Ajax updates parts of a page by fetching a bit of data from the server behind the scenes. This means updates can happen without a full page refresh. Traditional web pages without Ajax need a full reload to update. However, Ajax is not perfect:</p><p>● It’s more suited for MVC programming, not quite in line with the front-end MVVM trend.</p><p>● Built on the not-so-clear architecture of native XHR.</p><p>● Doesn’t quite stick to the Separation of Concerns principle.</p><p>● Setup and calling methods can be a bit messy, and its event-based async model isn’t friendly.</p><h2 id="（2）Fetch"><a href="#（2）Fetch" class="headerlink" title="（2）Fetch"></a>（2）Fetch</h2><p>Fetch is often seen as AJAX’s replacement, coming into play with ES6 and using its promise objects. It’s all about promises, making its code structure way simpler than Ajax. Fetch isn’t just a rewrap of Ajax; it’s native JavaScript and does not use XMLHttpRequest objects.</p><h3 id="The-cool-things-about-fetch"><a href="#The-cool-things-about-fetch" class="headerlink" title="The cool things about fetch:"></a>The cool things about fetch:</h3><p>● Straightforward syntax, more semantic.</p><p>● Built on the standard Promise, supports async&#x2F;await.</p><p>● More fundamental, comes with a rich set of APIs (request, response).</p><p>● Moves away from XHR, offering a new approach in ES standards.</p><h3 id="The-not-so-cool-things-about-fetch"><a href="#The-not-so-cool-things-about-fetch" class="headerlink" title="The not-so-cool things about fetch:"></a>The not-so-cool things about fetch:</h3><p>● It only throws errors for network issues, treating 400s and 500s as successes. It won’t reject for these server errors unless it’s a network problem.</p><p>● By default, fetch won’t carry cookies. You need to tweak it with: fetch(url, {credentials: ‘include’}).</p><p>● Lacks support for aborting requests or controlling timeouts. Workarounds like setTimeout and Promise.reject can’t stop the ongoing background process, wasting data.</p><p>● Can’t natively track the progress of requests, unlike XHR.</p><h2 id="（3）Axios"><a href="#（3）Axios" class="headerlink" title="（3）Axios"></a>（3）Axios</h2><p>Axios is a Promise-based HTTP client. It’s features are as follows:</p><p>● Launches XMLHttpRequests from browsers.</p><p>● Handles HTTP requests in Node.js.</p><p>● Supports the Promise API.</p><p>● Tracks requests and responses.</p><p>● Transforms requests and responses.</p><p>● Can cancel requests.</p><p>● Automatically handles JSON data.</p><p>● The client side supports to guard against XSRF attacks.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Understanding the execution context</title>
      <link href="/2024/01/14/execution%20context/"/>
      <url>/2024/01/14/execution%20context/</url>
      
        <content type="html"><![CDATA[<!-- ## Understanding the execution context  --><ol><li>Execution context type</li></ol><p>（1）global execution context</p><p>Anything that is not inside a function is a global execution context. It first creates a global window object and sets the value of this object to be equal to this global object. A program has only one global execution context. </p><p>（2）function execution context</p><p>When a function is called, a new execution context is created for the function. The context of the function can be as many as possible. </p><p>（3）* * eval * * function execution context  </p><p>the code executed in the eval function has its own execution context. However, the eval function is not often used and is not introduced. </p><h2 id="2-Execute-the-context-stack"><a href="#2-Execute-the-context-stack" class="headerlink" title="2. Execute the context stack"></a>2. Execute the context stack</h2><p>● the JavaScript engine uses the execution context stack to manage the execution context.</p><p>● when the JavaScript executes the code, it first encounters the global code, creates a global execution context and presses it into the execution stack. Whenever a function call is encountered, it creates a new execution context for the function and presses it into the top of the stack. The engine executes the function at the top of the execution context stack. After the function execution is completed, the execution context pops up from the stack and continues to execute the next context. After all the code is executed, the global execution context pops up from the stack.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let a = &#x27;Hello World!&#x27;;</span><br><span class="line">function first() &#123;</span><br><span class="line">  console.log(&#x27;Inside first function&#x27;);</span><br><span class="line">  second();</span><br><span class="line">  console.log(&#x27;Again inside first function&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">function second() &#123;</span><br><span class="line">  console.log(&#x27;Inside second function&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">first();</span><br><span class="line">//order of excution</span><br><span class="line">// second()  first()</span><br></pre></td></tr></table></figure><h2 id="3-Create-an-execution-context"><a href="#3-Create-an-execution-context" class="headerlink" title="3. Create an execution context"></a>3. Create an execution context</h2><p>there are two phases to create an execution context: creation phase and execution phase </p><h3 id="1）creation-phase"><a href="#1）creation-phase" class="headerlink" title="1）creation phase"></a>1）creation phase</h3><p> （1）this binding<br>●<br>in the context of global execution, this point to a global object (window object) </p><p>●<br>in the context of function execution, this point depends on how the function is called. If it is called by a reference object, this is set to that object, otherwise the value of this is set to global object or undefined </p><p>###（2）create lexical environment components </p><p>●<br>lexical environment is a kind identifier – Variable mapping the identifier refers to the variable&#x2F;function name, and the variable is a reference to the actual object or raw data.</p><p>●<br>the lexical environment has two internal components: bold Style : environment recorder: used to store the actual location of variable function declarations references to external environments : you can access the parent scope. </p><p>###（3）Create a variable environment component</p><p>●<br>the variable environment is also a lexical environment. Its environment recorder holds the binding relationship created in the execution context of the variable declaration statement. </p><h3 id="2）execution-phase"><a href="#2）execution-phase" class="headerlink" title="2）execution phase"></a>2）execution phase</h3><p>At this stage, variables are allocated and the code is executed. </p><p>In short, the execution context refers:</p><p>Before executing a little JS code, you need to parse the code. When parsing, a global execution context is created. First, the variables and function declarations to be executed in the code are taken out. The variables are assigned to undefined first, and the functions are declared to be available. After this step is completed, the formal execution procedure is started. </p><p>Before a function is executed, a function execution context is also created, which is similar to the global execution context. However, this, arguments, and function parameters are added to the function execution context. </p><p>●<br>global Context: variable definition, function declaration </p><p>●<br>function context: variable definition, function declaration, this , arguments</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>The understanding of array-like objects</title>
      <link href="/2024/01/14/array-like%20objects/"/>
      <url>/2024/01/14/array-like%20objects/</url>
      
        <content type="html"><![CDATA[<h1 id="1、The-understanding-of-array-like-objects-and-How-to-convert-them-into-arrays"><a href="#1、The-understanding-of-array-like-objects-and-How-to-convert-them-into-arrays" class="headerlink" title="1、The understanding of array-like objects  ,and How to convert them into arrays?"></a>1、The understanding of array-like objects  ,and How to convert them into arrays?</h1><p>An object with the length attribute and several Index attributes can be called a array-like object. Array-like objects are similar to arrays, but array methods cannot be called. Common array-like objects include arguments and DOM methods. Function parameters can also be considered as array-like objects because they contain the length attribute value, which represents the number of parameters that can be received. </p><h2 id="There-are-several-common-methods-to-convert-array-like-arrays-into-arrays"><a href="#There-are-several-common-methods-to-convert-array-like-arrays-into-arrays" class="headerlink" title="There are several common methods to convert array-like arrays into arrays:"></a>There are several common methods to convert array-like arrays into arrays:</h2><p>●<br>call the slice method of the array to implement conversion.<br>Array.prototype.slice.call(arrayLike);</p><p>●<br>call the splice method of an array to implement conversion.<br>Array.prototype.splice.call(arrayLike, 0);</p><p>●<br>use apply to call the concat method of an array to implement conversion<br>Array.prototype.concat.apply([], arrayLike);</p><p>●<br>use the Array.from Method to implement conversion<br>Array.from(arrayLike);</p><h1 id="2-Can-the-properties-of-const-objects-be-modified"><a href="#2-Can-the-properties-of-const-objects-be-modified" class="headerlink" title="2.Can the properties of const objects be modified"></a>2.Can the properties of const objects be modified</h1><p>what const guarantees  is not  the value of a variable cannot be changed, but that the memory address to which the variable points cannot be changed.</p><p>For basic data types (numbers, strings, boolean values), their values are stored at the memory address the variable points to, so it is equivalent to a constant.</p><p>But for data of reference type (mainly objects and arrays), the variable points to the memory address of the data, saving only a pointer, const can only guarantee that the pointer is fixed, as it points to the data structure is not mutable, it can not control.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Differences between map and weakMap</title>
      <link href="/2024/01/14/map%20weakMap/"/>
      <url>/2024/01/14/map%20weakMap/</url>
      
        <content type="html"><![CDATA[<!-- # Differences between map and weakMap --><h2 id="（1）Map"><a href="#（1）Map" class="headerlink" title="（1）Map"></a>（1）Map</h2><p>map is essentially a set of key-value pairs, but the key in a common Object can only be a string. The Map data structure provided by ES6 is similar to that of an object, but its keys do not limit the range. It can be of any type and is a more complete Hash structure. If the Map key is an original data type, it is considered the same key as long as the two keys are strictly the same. </p><p>In fact, Map is an array, and each of its data is also an array, with the following format:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const map = [</span><br><span class="line">     [&quot;name&quot;,&quot;John&quot;],</span><br><span class="line">     [&quot;age&quot;,18],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>The Map data structure has the following operation methods:</p><p>● size： map.size<br>    map. size returns the total number of members of the Map structure. </p><p>● set(key,value)：<br>  set the key value corresponding to the key name and key, and then return the entire Map structure. If the key already has a value, the key value is updated. Otherwise, the key is generated. (Because the current Map object is returned, it can be called in chain) </p><p>● get(key)：<br>    This method reads the key value corresponding to the key. If the key cannot be found, the undefined is returned. </p><p>● has(key)：<br>    This method returns a boolean value indicating whether a key is in the current Map object.<br>● delete(key)：</p><p> This method deletes a key and returns true. If the key fails to be deleted, false is returned.</p><p>● clear()：<br>    map.clear() clears all members. No return value is returned. </p><p>The Map structure provides three traversal functions and a traversal method.</p><p>● keys()： Returns an iterator for keys.</p><p>● values()： Returns an iterator for values.</p><p>● entries()：  Returns an iterator for all members.</p><p>● forEach()：。 Traverses all members of the Map.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const map = new Map([</span><br><span class="line">     [&quot;foo&quot;,1],</span><br><span class="line">     [&quot;bar&quot;,2],</span><br><span class="line">])</span><br><span class="line">for(let key of map.keys())&#123;</span><br><span class="line">    console.log(key);  // foo bar</span><br><span class="line">&#125;</span><br><span class="line">for(let value of map.values())&#123;</span><br><span class="line">     console.log(value); // 1 2</span><br><span class="line">&#125;</span><br><span class="line">for(let items of map.entries())&#123;</span><br><span class="line">    console.log(items);  // [&quot;foo&quot;,1]  [&quot;bar&quot;,2]</span><br><span class="line">&#125;</span><br><span class="line">map.forEach( (value,key,map) =&gt; &#123;</span><br><span class="line">     console.log(key,value); // foo 1    bar 2</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="（2）WeakMap"><a href="#（2）WeakMap" class="headerlink" title="（2）WeakMap"></a>（2）WeakMap</h2><p>WeakMap object is also a set of key-value correct sets, where keys are weakly referenced. The key must be an object. , the original data type cannot be used as a key value, but the value can be arbitrary. </p><p>This object also has the following methods: </p><p>● set(key,value)：<br>    set the key value corresponding to the key name and key, and then return the entire Map structure. If the key already has a value, the key value is updated. Otherwise, the key is generated. (Because the current Map object is returned, it can be called in chain)</p><p>● get(key)：<br>    This method reads the key value corresponding to the key. If the key cannot be found, the undefined is returned. </p><p>● has(key)：<br>    This method returns a boolean value indicating whether a key is in the current Map object. </p><p>● delete(key)：<br>    This method deletes a key and returns true. If the key fails to be deleted, false is returned. </p><p>The clear() method has been deprecated, so you can clear it by creating an empty WeakMap and replacing the original object.</p><p>The purpose of WeakMap is to store some data on an object sometimes, but this will form a reference to the object. Once the two objects are no longer needed, you must manually delete the reference. Otherwise, the garbage collection mechanism will not release the memory occupied by the objects.</p><p>And WeakMap the objects referenced by key names are all weak references. , that is, the garbage collection mechanism does not take this reference into account. Therefore, as long as other references of the referenced object are cleared, the garbage collection mechanism releases the memory occupied by the object. That is to say, once it is no longer needed, WeakMap the key name object and the corresponding key-value pair disappear automatically. You do not need to delete the reference manually. .</p><p>Summary: </p><p>●<br>    Map data structure. It is similar to an object and is also a set of correct key values. However, the range of “keys” is not limited to strings. Various types of values (including objects) can be treated as keys.</p><p>●<br>    The WeakMap structure is similar to the Map structure and is also used to generate the correct set of key values. However, WeakMap only accept objects as key names (except null) and do not accept other types of values as key names. The objects pointed to by the key name of the WeakMap are not included in the garbage collection mechanism.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>What happens if you create a new arrow function</title>
      <link href="/2024/01/14/arrow%20functions/"/>
      <url>/2024/01/14/arrow%20functions/</url>
      
        <content type="html"><![CDATA[<!-- # What happens if you create a new arrow function --><p>The arrow function is introduced in ES6. It does not have a prototype, nor does it have its own this reference, and it cannot use the arguments parameter. Therefore, it is not possible to use the new operator with an arrow function.</p><h2 id="The-steps-to-implement-the-new-operator-are-as-follows"><a href="#The-steps-to-implement-the-new-operator-are-as-follows" class="headerlink" title="The steps to implement the new operator are as follows:"></a>The steps to implement the new operator are as follows:</h2><p>1.Create a new object</p><ol start="2"><li><p>Assign the constructor function’s scope to the new object (in other words, set the object’s proto property to point to the constructor function’s prototype property)</p></li><li><p>Point to the code in the constructor, and this in the constructor points to the object (That is, to add properties and methods to the object)</p></li><li><p>Return a new object</p></li></ol><p>Therefore, the arrow functions in the above steps cannot be executed.</p><h2 id="The-difference-between-arrow-functions-and-ordinary-functions"><a href="#The-difference-between-arrow-functions-and-ordinary-functions" class="headerlink" title="The difference between arrow functions and ordinary functions"></a>The difference between arrow functions and ordinary functions</h2><h3 id="1-Arrow-functions-are-more-concise-than-ordinary-functions"><a href="#1-Arrow-functions-are-more-concise-than-ordinary-functions" class="headerlink" title="(1) Arrow functions are more concise than ordinary functions"></a>(1) Arrow functions are more concise than ordinary functions</h3><p>● If there are no arguments, just write an empty parenthesis</p><p>● If there is only one parameter, you can omit the parentheses for the parameter</p><p>● If there are multiple parameters, separate them with commas</p><p>● If the return value of the function body is only one sentence, you can omit the braces</p><p>● If the function body does not require a return value and only has one sentence, you can prefix the statement with a void keyword. The most common is to call a function:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let fn = () =&gt; void doesNotReturn();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="（2）Arrow-functions-do-not-have-their-own-‘this’-keyword"><a href="#（2）Arrow-functions-do-not-have-their-own-‘this’-keyword" class="headerlink" title="（2）Arrow functions do not have their own ‘this’ keyword."></a>（2）Arrow functions do not have their own ‘this’ keyword.</h3><p>The arrow function doesn’t create its own this, so it doesn’t have its own this, it just inherits this at the level above its own scope. So the pointer to this in the arrow function was already fixed when it was defined, and it doesn’t change after that.</p><h3 id="（3）This-pointer-inherited-from-the-arrow-function-never-changes"><a href="#（3）This-pointer-inherited-from-the-arrow-function-never-changes" class="headerlink" title="（3）This pointer inherited from the arrow function never changes"></a>（3）This pointer inherited from the arrow function never changes</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var id = &#x27;GLOBAL&#x27;;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  id: &#x27;OBJ&#x27;,</span><br><span class="line">  a: function()&#123;</span><br><span class="line">    console.log(this.id);</span><br><span class="line">  &#125;,</span><br><span class="line">  b: () =&gt; &#123;</span><br><span class="line">    console.log(this.id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.a();    // &#x27;OBJ&#x27;</span><br><span class="line">obj.b();    // &#x27;GLOBAL&#x27;</span><br><span class="line">new obj.a()  // undefined</span><br><span class="line">new obj.b()  // Uncaught TypeError: obj.b is not a constructor</span><br></pre></td></tr></table></figure><p>Method b of object obj is defined using an arrow function, and this in this function always points to this in the global execution environment in which it was defined, even if the function is called as a method of object obj, this still points to the Window object.</p><p>It is worth noting that the curly brackets {} used to define objects cannot form a separate execution environment, they still remain in the global execution environment.</p><h3 id="（4）The-methods-call-apply-bind-etc-cannot-change-the-reference-of-‘this’-in-arrow-functions"><a href="#（4）The-methods-call-apply-bind-etc-cannot-change-the-reference-of-‘this’-in-arrow-functions" class="headerlink" title="（4）The methods call(), apply(), bind(), etc. cannot change the reference of ‘this’ in arrow functions."></a>（4）The methods call(), apply(), bind(), etc. cannot change the reference of ‘this’ in arrow functions.</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var id = &#x27;Global&#x27;;</span><br><span class="line">let fun1 = () =&gt; &#123;</span><br><span class="line">    console.log(this.id)</span><br><span class="line">&#125;;</span><br><span class="line">fun1();                     // &#x27;Global&#x27;</span><br><span class="line">fun1.call(&#123;id: &#x27;Obj&#x27;&#125;);     // &#x27;Global&#x27;</span><br><span class="line">fun1.apply(&#123;id: &#x27;Obj&#x27;&#125;);    // &#x27;Global&#x27;</span><br><span class="line">fun1.bind(&#123;id: &#x27;Obj&#x27;&#125;)();   // &#x27;Global&#x27;</span><br></pre></td></tr></table></figure><h3 id="（5）Arrow-functions-cannot-be-used-as-constructors"><a href="#（5）Arrow-functions-cannot-be-used-as-constructors" class="headerlink" title="（5）Arrow functions cannot be used as constructors"></a>（5）Arrow functions cannot be used as constructors</h3><p>The process of constructing a function with ‘new’ has been explained above. In fact, the second step is to refer the ‘this’ in the function to the object. However, since arrow functions do not have their own ‘this’ and the ‘this’ refers to the outer execution environment, and cannot be changed, they cannot be used as constructors.</p><h3 id="（6）Arrow-functions-do-not-have-their-own-arguments"><a href="#（6）Arrow-functions-do-not-have-their-own-arguments" class="headerlink" title="（6）Arrow functions do not have their own arguments."></a>（6）Arrow functions do not have their own arguments.</h3><p>The arrow function does not have its own arguments object. Accessing arguments in an arrow function actually gets the arguments value of its outer function.</p><h3 id="（7）Arrow-functions-do-not-have-a-prototype"><a href="#（7）Arrow-functions-do-not-have-a-prototype" class="headerlink" title="（7）Arrow functions do not have a prototype."></a>（7）Arrow functions do not have a prototype.</h3><h3 id="（8）Arrow-functions-cannot-be-used-as-Generator-functions-and-cannot-use-the-yeild-keyword"><a href="#（8）Arrow-functions-cannot-be-used-as-Generator-functions-and-cannot-use-the-yeild-keyword" class="headerlink" title="（8）Arrow functions cannot be used as Generator functions and cannot use the yeild keyword"></a>（8）Arrow functions cannot be used as Generator functions and cannot use the yeild keyword</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>What are the rules for type coercion of the == operator?</title>
      <link href="/2024/01/08/==%20operator/"/>
      <url>/2024/01/08/==%20operator/</url>
      
        <content type="html"><![CDATA[<!-- # What are the rules for type coercion of the == operator? --><p>For the &#x3D;&#x3D; operator,if the types of the two operands being compared are different, the type conversion is performed. If you compare whether x and y are the same, the following judgment process will be performed:</p><ol><li>First, it will determine whether the two types are the same, and compare the size of the two if they are the same;</li></ol><p>2.If the types are not the same, type conversion will be performed;</p><p>3.It will first determine whether it is comparing null and undefined, and if it is, it will return true</p><p>4.Check if the types of both are string and number, if so, the string will be converted to number.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 == &#x27;1&#x27;</span><br><span class="line">      ↓</span><br><span class="line">1 ==  1</span><br></pre></td></tr></table></figure><p>5.To determine whether one of the parties is a boolean, if so, it will change the boolean to number and then make a judgment</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x27;1&#x27; == true</span><br><span class="line">        ↓</span><br><span class="line">&#x27;1&#x27; ==  1</span><br><span class="line">        ↓</span><br><span class="line"> 1  ==  1</span><br></pre></td></tr></table></figure><p>6.Determine if one of the elements is an object and the other is a string, number, or symbol. If so, the object will be converted to its primitive type before the comparison.<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;1&#x27; == &#123; name: &#x27;js&#x27; &#125;</span><br><span class="line">        ↓</span><br><span class="line">&#x27;1&#x27; == &#x27;[object Object]&#x27;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>The difference between null and undefined</title>
      <link href="/2024/01/08/null-and-undefined/"/>
      <url>/2024/01/08/null-and-undefined/</url>
      
        <content type="html"><![CDATA[<!-- # The difference between null and undefined --><p>First of all, Undefined and Null are both basic data types. Each of these two basic data types has only one value, which is undefined and null.</p><p>Undefined means undefined, while null means empty object. When a general variable is declared but not yet defined, it will return undefined. null is mainly used to assign values to variables that may return objects as initialization.</p><p>Undefined is not a reserved word in JavaScript, which means that it can be used as a variable name, but this approach is very dangerous as it can affect the judgment of the undefined value. We can obtain secure undefined values through some methods, such as void 0.</p><p>When using typeof to judge these two types, Null typing will return “object”, which is a historical problem. Returns true when using a double equal sign to compare two types of values, and returns false when using a triple equal sign.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Data types for Javascript</title>
      <link href="/2024/01/08/DataTypes-for-Javascript/"/>
      <url>/2024/01/08/DataTypes-for-Javascript/</url>
      
        <content type="html"><![CDATA[<!-- # Data types for Javascript --><h2 id="What-data-types-does-JavaScript-have-and-how-do-they-differ"><a href="#What-data-types-does-JavaScript-have-and-how-do-they-differ" class="headerlink" title="What data types does JavaScript have and how do they differ"></a>What data types does JavaScript have and how do they differ</h2><p>JavaScript has eight data types: Undefined, Null, Boolean, Number, String, Object, Symbol, and BigInt.</p><p>Where Symbol and BigInt are new data types in ES6:</p><p>● Symbol represents a unique and immutable data type created to resolve possible global variable conflicts.</p><p>● BigInt is a numeric type of data that can represent integers in any precision format. BigInt can be used to safely store and manipulate large integers, even if the Number is outside the range of safe integers that number can represent.</p><p>These data can be divided into raw data types and reference data types:</p><p>● Stack: raw data type</p><p>● Heap: References data types (objects, arrays, and functions)</p><p> The difference between the two types is the storage location:</p><p>● The original data type is a simple data segment directly stored in the stack, which occupies a small space and has a fixed size, and belongs to the frequently used data, so it is stored in the stack;</p><p>● An object whose data type is stored in the heap, occupying a large space and having an unfixed size. If stored in the stack, it will affect the performance of the program. The reference data type stores a pointer on the stack that points to the starting address of the entity in the heap. When the interpreter looks for a reference value, it first retrieves its address in the stack and then retrieves the entity from the heap.</p><p>The concepts of heap and stack exist in data structures and operating system memory, where:</p><p>● In the data structure, the access mode of the data in the stack is first in, last out.</p><p>● The heap is a priority queue that is sorted by priority, which can be specified by size.</p><p>In operating systems, memory is divided into stack and heap areas:</p><p>● The stack memory is automatically allocated and released by the compiler to store the parameter values of functions and the values of local variables. It operates like a stack in a data structure.</p><p>● Heap area memory is usually freed by the developer allocation, and if the developer does not free it, it may be reclaimed by the garbage collection mechanism at the end of the program.</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
